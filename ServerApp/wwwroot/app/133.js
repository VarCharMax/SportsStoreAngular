"use strict";(self.webpackChunkSportsStore=self.webpackChunkSportsStore||[]).push([[133],{4133:(z,F,u)=>{u.r(F),u.d(F,{AdminModule:()=>Y});var h=u(8132),c=u(2615),a=u(4341),j=u(7673),E=u(6354),y=u(9437),m=u(4717),_=u(8294);let g=(()=>{var n;class e{constructor(r,o){this.repo=r,this.router=o,this.authenticated=!1}login(){return this.authenticated=!1,this.repo.login(this.name,this.password).pipe((0,E.T)(r=>(r&&(this.authenticated=!0,this.password=void 0,this.router.navigateByUrl(this.callbackUrl||"/admin/overview")),this.authenticated)),(0,y.W)(r=>(this.authenticated=!1,(0,j.of)(!1))))}logout(){this.authenticated=!1,this.repo.logout(),this.router.navigateByUrl("/admin/login")}static#t=n=()=>(this.\u0275fac=function(o){return new(o||e)(c.KVO(m.L),c.KVO(_.Ix))},this.\u0275prov=c.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}))}return n(),e})();var t=u(3664);function R(n,e){1&n&&(t.j41(0,"h4",5),t.EFF(1,"Invalid username or password"),t.k0s())}function A(n,e){1&n&&(t.j41(0,"div",9),t.EFF(1,"Please enter your user name"),t.k0s())}function P(n,e){1&n&&(t.j41(0,"div",9),t.EFF(1,"Please enter your password"),t.k0s())}let x=(()=>{var n;class e{constructor(){this.authService=(0,c.WQX)(g),this.showError=!1}login(){this.showError=!1,this.authService.login().subscribe(r=>{this.showError=!r})}static#t=n=()=>(this.\u0275fac=function(o){return new(o||e)},this.\u0275cmp=t.VBU({type:e,selectors:[["ng-component"]],decls:21,vars:6,consts:[["authForm","ngForm"],["name","ngModel"],["password","ngModel"],[1,"navbar","bg-info","mb-1"],[1,"navbar-brand","text-white"],[1,"p-2","bg-danger","text-white"],["novalidate","",1,"m-3"],[1,"form-group"],["name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-danger"],["type","password","name","password","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-center","pt-2"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(o,i){if(1&o){const l=t.RV6();t.j41(0,"div",3)(1,"a",4),t.EFF(2,"SPORTS STORE Admin"),t.k0s()(),t.nVh(3,R,2,0,"h4",5),t.j41(4,"form",6,0)(6,"div",7)(7,"label"),t.EFF(8,"Name:"),t.k0s(),t.j41(9,"input",8,1),t.mxI("ngModelChange",function(p){return c.eBV(l),t.DH7(i.authService.name,p)||(i.authService.name=p),c.Njj(p)}),t.k0s(),t.nVh(11,A,2,0,"div",9),t.k0s(),t.j41(12,"div",7)(13,"label"),t.EFF(14,"Password:"),t.k0s(),t.j41(15,"input",10,2),t.mxI("ngModelChange",function(p){return c.eBV(l),t.DH7(i.authService.password,p)||(i.authService.password=p),c.Njj(p)}),t.k0s(),t.nVh(17,P,2,0,"div",9),t.k0s(),t.j41(18,"div",11)(19,"button",12),t.bIt("click",function(){return c.eBV(l),c.Njj(i.login())}),t.EFF(20," Login "),t.k0s()()()}if(2&o){const l=t.sdS(5),d=t.sdS(10),p=t.sdS(16);t.R7$(3),t.vxM(1==i.showError?3:-1),t.R7$(6),t.R50("ngModel",i.authService.name),t.R7$(2),t.vxM(1==d.invalid?11:-1),t.R7$(4),t.R50("ngModel",i.authService.password),t.R7$(2),t.vxM(1==p.invalid?17:-1),t.R7$(2),t.Y8G("disabled",l.invalid)}},dependencies:[a.YN,a.qT,a.me,a.BC,a.cb,a.YS,a.vS,a.cV],encapsulation:2}))}return n(),e})(),C=(()=>{var n;class e{constructor(r){this.router=r,this.authService=(0,c.WQX)(g)}canActivateChild(r,o){return!!this.authService.authenticated||(this.authService.callbackUrl=r.url.toString(),this.router.navigateByUrl("/admin/login"),!1)}static#t=n=()=>(this.\u0275fac=function(o){return new(o||e)(c.KVO(_.Ix))},this.\u0275prov=c.jDH({token:e,factory:e.\u0275fac}))}return n(),e})();const M=()=>({exact:!0});let T=(()=>{var n;class e{constructor(){this.authService=(0,c.WQX)(g),this.repo=(0,c.WQX)(m.L),this.repo.filter.reset(),this.repo.filter.related=!0,this.repo.getProductsAsync(),this.repo.getSuppliersAsync(),this.repo.getOrdersAsync()}static#t=n=()=>(this.\u0275fac=function(o){return new(o||e)},this.\u0275cmp=t.VBU({type:e,selectors:[["ng-component"]],decls:20,vars:2,consts:[[1,"navbar","bg-info","mb-1"],[1,"navbar-brand","text-white"],[1,"float-right","navbar-text"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"col-3","fixed-bottom","mb-1"],["routerLink","/store",1,"btn","btn-block","btn-secondary"],[1,"row","g-0"],[1,"col-1"],[1,"d-grid","gap-1"],["routerLink","/admin","routerLinkActive","active",1,"btn","btn-outline-info","m-1",3,"routerLinkActiveOptions"],["routerLink","/admin/products","routerLinkActive","active",1,"btn","btn-outline-info","m-1"],["routerLink","/admin/orders","routerLinkActive","active",1,"btn","btn-outline-info","m-1"],[1,"col","p-2"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"a",1),t.EFF(2,"SPORTS STORE Admin"),t.k0s(),t.j41(3,"div",2)(4,"button",3),t.bIt("click",function(){return i.authService.logout()}),t.EFF(5,"Log Out"),t.k0s()()(),t.j41(6,"div",4)(7,"a",5),t.EFF(8," Store "),t.k0s()(),t.j41(9,"div",6)(10,"div",7)(11,"div",8)(12,"button",9),t.EFF(13," Overview "),t.k0s(),t.j41(14,"button",10),t.EFF(15," Products "),t.k0s(),t.j41(16,"button",11),t.EFF(17," Orders "),t.k0s()()(),t.j41(18,"div",12),t.nrm(19,"router-outlet"),t.k0s()()),2&o&&(t.R7$(12),t.Y8G("routerLinkActiveOptions",t.lJ4(1,M)))},dependencies:[h.Wk,h.iI,_.n3,h.wQ],encapsulation:2}))}return n(),e})();var k=u(2200);const S=(n,e)=>e.orderId;function I(n,e){if(1&n){const s=t.RV6();t.rj2(0,"td")(1,"button",2),t.VwU("click",function(){c.eBV(s);const o=t.XpG().$implicit,i=t.XpG(2);return c.Njj(i.markShipped(o))}),t.EFF(2,"Ship"),t.eux()()}}function V(n,e){1&n&&(t.rj2(0,"td"),t.EFF(1,"Shipped"),t.eux())}function w(n,e){if(1&n&&(t.rj2(0,"tr")(1,"td"),t.EFF(2),t.eux(),t.rj2(3,"td"),t.EFF(4),t.eux(),t.rj2(5,"td"),t.EFF(6),t.eux(),t.rj2(7,"td"),t.EFF(8),t.nI1(9,"currency"),t.eux(),t.nVh(10,I,3,0,"td")(11,V,2,0,"td"),t.eux()),2&n){const s=e.$implicit;t.R7$(2),t.JRh(s.name),t.R7$(2),t.JRh(s.address),t.R7$(2),t.JRh(s.products.length),t.R7$(2),t.JRh(t.brH(9,5,s.payment.total,"AUD","symbol")),t.R7$(2),t.vxM(s.shipped?11:10)}}function B(n,e){if(1&n&&(t.rj2(0,"table",0)(1,"tbody")(2,"tr")(3,"th"),t.EFF(4,"Customer"),t.eux(),t.rj2(5,"th"),t.EFF(6,"Address"),t.eux(),t.rj2(7,"th"),t.EFF(8,"Products"),t.eux(),t.rj2(9,"th"),t.EFF(10,"Total"),t.eux(),t.Hgh(11,"th"),t.eux(),t.Z7z(12,w,12,9,"tr",null,S),t.eux()()),2&n){const s=t.XpG();t.R7$(12),t.Dyx(s.orders)}}function O(n,e){1&n&&(t.rj2(0,"h3",1),t.EFF(1,"There are no orders"),t.eux())}let $=(()=>{var n;class e{constructor(){this.repo=(0,c.WQX)(m.L)}get orders(){return this.repo.getOrdersCached()}markShipped(r){this.repo.shipOrderAsync(r)}static#t=n=()=>(this.\u0275fac=function(o){return new(o||e)},this.\u0275cmp=t.VBU({type:e,selectors:[["ng-component"]],decls:2,vars:1,consts:[[1,"table","table-striped"],[1,"text-center"],[1,"btn","btn-sm","btn-primary",3,"click"]],template:function(o,i){1&o&&t.nVh(0,B,14,0,"table",0)(1,O,2,0,"h3",1),2&o&&t.vxM(i.orders.length>0?0:1)},dependencies:[k.oe],encapsulation:2}))}return n(),e})(),v=(()=>{var n;class e{constructor(){this.repo=(0,c.WQX)(m.L)}get products(){return this.repo.getProductsCached()}get orders(){return this.repo.getOrdersCached()}static#t=n=()=>(this.\u0275fac=function(o){return new(o||e)},this.\u0275cmp=t.VBU({type:e,selectors:[["ng-component"]],decls:13,vars:2,consts:[[1,"table","m-1"],["routerLink","/admin/products",1,"btn","btn-sm","btn-info"],["routerLink","/admin/orders",1,"btn","btn-sm","btn-info"]],template:function(o,i){1&o&&(t.j41(0,"table",0)(1,"tr")(2,"td"),t.EFF(3),t.k0s(),t.j41(4,"td")(5,"button",1),t.EFF(6," Manage Products "),t.k0s()()(),t.j41(7,"tr")(8,"td"),t.EFF(9),t.k0s(),t.j41(10,"td")(11,"button",2),t.EFF(12," Manage Orders "),t.k0s()()()()),2&o&&(t.R7$(3),t.SpI("There are ",i.products.length||0," products for sale"),t.R7$(6),t.SpI("There are ",i.orders.length||0," orders"))},dependencies:[h.Wk],encapsulation:2}))}return n(),e})();var f=u(8359),b=u(2181);const X=(n,e)=>e.supplierId;function G(n,e){if(1&n&&(t.j41(0,"option",3),t.EFF(1),t.k0s()),2&n){const s=e.$implicit;t.Y8G("ngValue",s),t.R7$(),t.JRh(s.name)}}let L=(()=>{var n;class e{constructor(){this.repo=(0,c.WQX)(m.L)}get product(){return this.repo.getProductCached()||new b.Y}get suppliers(){return this.repo.getSuppliersCached()}compareSuppliers(r,o){return r&&o&&r.name==o.name}static#t=n=()=>(this.\u0275fac=function(o){return new(o||e)},this.\u0275cmp=t.VBU({type:e,selectors:[["admin-product-editor"]],decls:22,vars:6,consts:[[1,"form-group"],[1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel","compareWith"],[3,"ngValue"],["type","number",1,"form-control",3,"ngModelChange","ngModel"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"label"),t.EFF(2,"Name"),t.k0s(),t.j41(3,"input",1),t.mxI("ngModelChange",function(d){return t.DH7(i.product.name,d)||(i.product.name=d),d}),t.k0s()(),t.j41(4,"div",0)(5,"label"),t.EFF(6,"Category"),t.k0s(),t.j41(7,"input",1),t.mxI("ngModelChange",function(d){return t.DH7(i.product.category,d)||(i.product.category=d),d}),t.k0s()(),t.j41(8,"div",0)(9,"label"),t.EFF(10,"Supplier"),t.k0s(),t.j41(11,"select",2),t.mxI("ngModelChange",function(d){return t.DH7(i.product.supplier,d)||(i.product.supplier=d),d}),t.Z7z(12,G,2,2,"option",3,X),t.k0s()(),t.j41(14,"div",0)(15,"label"),t.EFF(16,"Description"),t.k0s(),t.j41(17,"textarea",1),t.mxI("ngModelChange",function(d){return t.DH7(i.product.description,d)||(i.product.description=d),d}),t.k0s()(),t.j41(18,"div",0)(19,"label"),t.EFF(20,"Price"),t.k0s(),t.j41(21,"input",4),t.mxI("ngModelChange",function(d){return t.DH7(i.product.price,d)||(i.product.price=d),d}),t.k0s()()),2&o&&(t.R7$(3),t.R50("ngModel",i.product.name),t.R7$(4),t.R50("ngModel",i.product.category),t.R7$(4),t.R50("ngModel",i.product.supplier),t.Y8G("compareWith",i.compareSuppliers),t.R7$(),t.Dyx(i.suppliers),t.R7$(5),t.R50("ngModel",i.product.description),t.R7$(4),t.R50("ngModel",i.product.price))},dependencies:[a.YN,a.xH,a.y7,a.me,a.Q0,a.wz,a.BC,a.vS],encapsulation:2}))}return n(),e})();const D=(n,e)=>e.productId;function N(n,e){if(1&n){const s=t.RV6();t.j41(0,"td"),t.EFF(1),t.k0s(),t.j41(2,"td"),t.EFF(3),t.k0s(),t.j41(4,"td"),t.EFF(5),t.k0s(),t.j41(6,"td"),t.EFF(7),t.k0s(),t.j41(8,"td"),t.EFF(9),t.nI1(10,"currency"),t.k0s(),t.j41(11,"td")(12,"button",5),t.bIt("click",function(){c.eBV(s);const o=t.XpG().$implicit,i=t.XpG(2);return c.Njj(i.selectProduct(o.productId))}),t.EFF(13," Edit "),t.k0s(),t.j41(14,"button",6),t.bIt("click",function(){c.eBV(s);const o=t.XpG().$implicit,i=t.XpG(2);return c.Njj(i.deleteProduct(o.productId))}),t.EFF(15," Delete "),t.k0s()()}if(2&n){const s=t.XpG().$implicit;t.R7$(),t.JRh(s.productId),t.R7$(2),t.JRh(s.name),t.R7$(2),t.JRh(s.category),t.R7$(2),t.JRh((null==s.supplier?null:s.supplier.name)||"(None)"),t.R7$(2),t.JRh(t.brH(10,5,s.price,"AUD","symbol"))}}function U(n,e){if(1&n){const s=t.RV6();t.j41(0,"td",4),t.nrm(1,"admin-product-editor"),t.j41(2,"div",7)(3,"button",5),t.bIt("click",function(){c.eBV(s);const o=t.XpG(3);return c.Njj(o.saveProduct())}),t.EFF(4,"Save"),t.k0s(),t.j41(5,"button",8),t.bIt("click",function(){c.eBV(s);const o=t.XpG(3);return c.Njj(o.clearProduct())}),t.EFF(6," Cancel "),t.k0s()()()}}function H(n,e){if(1&n&&(t.j41(0,"tr"),t.nVh(1,N,16,9)(2,U,7,0,"td",4),t.k0s()),2&n){const s=e.$implicit,r=t.XpG(2);t.R7$(),t.vxM(s.productId!==r.product.productId?1:2)}}function W(n,e){if(1&n){const s=t.RV6();t.j41(0,"table",0)(1,"tbody")(2,"tr")(3,"th"),t.EFF(4,"ID"),t.k0s(),t.j41(5,"th"),t.EFF(6,"Name"),t.k0s(),t.j41(7,"th"),t.EFF(8,"Category"),t.k0s(),t.j41(9,"th"),t.EFF(10,"Supplier"),t.k0s(),t.j41(11,"th"),t.EFF(12,"Price"),t.k0s(),t.nrm(13,"th"),t.k0s(),t.Z7z(14,H,3,1,"tr",null,D),t.k0s(),t.j41(16,"tfoot")(17,"tr")(18,"td",2)(19,"button",3),t.bIt("click",function(){c.eBV(s);const o=t.XpG();return o.clearProduct(),c.Njj(o.tableMode=!1)}),t.EFF(20," Create "),t.k0s()()()()()}if(2&n){const s=t.XpG();t.R7$(14),t.Dyx(s.products)}}function J(n,e){if(1&n){const s=t.RV6();t.j41(0,"div",1),t.nrm(1,"admin-product-editor"),t.j41(2,"button",3),t.bIt("click",function(){c.eBV(s);const o=t.XpG();return c.Njj(o.saveProduct())}),t.EFF(3,"Save"),t.k0s(),t.j41(4,"button",9),t.bIt("click",function(){c.eBV(s);const o=t.XpG();return c.Njj(o.clearProduct())}),t.EFF(5,"Cancel"),t.k0s()()}}const Q=[{path:"login",component:x},{path:"",component:T,canActivateChild:[C],children:[{path:"products",component:(()=>{var n;class e{constructor(){this.repo=(0,c.WQX)(m.L),this.productRetrieved=new f.yU,this.productsChanged=new f.yU,this.productChanged=new f.yU,this.product=new b.Y,this.products=[],this.tableMode=!0}ngOnInit(){this.productChanged=this.repo.productChanged.subscribe({next:r=>{let o=this.products.findIndex(i=>i.productId===r.productId);this.products[o]=r,this.product=r,this.clearProduct(),this.tableMode=!0},error:()=>{}}),this.productRetrieved=this.repo.productRetrieved.subscribe({next:r=>{this.product=r},error:()=>{}}),this.productsChanged=this.repo.productsChanged.subscribe({next:r=>{this.products=r,this.clearProduct(),this.tableMode=!0},error:()=>{}}),this.products=this.repo.getProductsCached()}selectProduct(r){this.repo.getProductAsync(r)}saveProduct(){null==this.product.productId?this.repo.createProductAsync(this.product):this.repo.replaceProductAsync(this.product)}deleteProduct(r){this.repo.deleteProductAsync(r)}clearProduct(){this.product=new b.Y,this.repo.clearProductCache(),this.tableMode=!0}ngOnDestroy(){this.productChanged.unsubscribe(),this.productsChanged.unsubscribe(),this.productRetrieved.unsubscribe()}static#t=n=()=>(this.\u0275fac=function(o){return new(o||e)},this.\u0275cmp=t.VBU({type:e,selectors:[["ng-component"]],decls:2,vars:1,consts:[[1,"table","table-sm","table-striped"],[1,"m-2"],["colspan","6",1,"text-center"],[1,"btn","btn-primary",3,"click"],["colspan","6",1,"bg-light","border","p-3"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"btn","btn-sm","btn-danger","ml-1",3,"click"],[1,"text-center"],[1,"btn","btn-sm","btn-info","ml-1",3,"click"],[1,"btn","btn-info","ml-1",3,"click"]],template:function(o,i){1&o&&t.nVh(0,W,21,0,"table",0)(1,J,6,0,"div",1),2&o&&t.vxM(1==i.tableMode?0:1)},dependencies:[L,k.oe],encapsulation:2}))}return n(),e})()},{path:"orders",component:$},{path:"overview",component:v},{path:"",component:v}]}];let Y=(()=>{var n;class e{static#t=n=()=>(this.\u0275fac=function(o){return new(o||e)},this.\u0275mod=t.$C({type:e}),this.\u0275inj=c.G2t({providers:[C],imports:[h.iI.forChild(Q)]}))}return n(),e})()}}]);